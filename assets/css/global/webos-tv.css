/**
 * webOS TV Optimizations
 *
 * Simple styles for TV navigation.
 * Uses the .webosTV body class added dynamically when running on webOS.
 *
 * Note: Tablet layout is triggered by setting viewport width to 1024px
 * in the webos-input plugin. Hover effects are disabled since TV has no mouse.
 */

/* ============================================
   Hide cursor on TV
   ============================================ */

body.webosTV,
body.webosTV * {
  cursor: none !important;
}

body.webosTV input,
body.webosTV textarea,
body.webosTV select {
  cursor: text !important;
}

/* ============================================
   Simplified Sidebar Navigation for TV
   Replace desktop sidebar with mobile-style vertical menu on left
   ============================================ */

/* Override sidebar width for TV - make it narrower like mobile bottom bar */
body.webosTV {
  --sidebar-width: 100px !important;

  scroll-behavior: smooth;
}

/* Hide desktop sidebar components that are too complex for TV */
body.webosTV .desktopOnly {
  display: none !important;
}

/* Show mobile navigation but reposition it to the left side */
body.webosTV .mobileOnly {
  display: flex !important;
}

/* Transform mobile bottom navigation into left vertical navigation for TV */
body.webosTV nav ul[class*='mobileNavigation'] {
  /* Change from bottom horizontal to left vertical */
  position: fixed;
  inset: 0 auto 0 0 !important;
  z-index: 9 !important;
  flex-direction: column !important;
  gap: var(--space-16) !important;
  width: 100px !important;
  height: 100vh !important;
  padding: var(--space-24) var(--space-8) !important;
  border-top: none !important;
  border-right: 1px solid var(--border-color) !important;
}

/* Adjust mobile navigation items for vertical layout */
body.webosTV nav ul[class*='mobileNavigation'] li {
  flex: 0 !important;
  width: 100% !important;
}

/* Stack icon and text vertically */
body.webosTV nav ul[class*='mobileNavigation'] a {
  flex-direction: column !important;
  gap: var(--space-4) !important;
  align-items: center !important;
  justify-content: center !important;
  padding: var(--space-12) var(--space-4) !important;
  font-size: 0.7rem !important;
  line-height: 1.2 !important;
  text-align: center !important;
}

/* Make icons larger for TV */
body.webosTV nav ul[class*='mobileNavigation'] svg {
  width: 32px !important;
  height: 32px !important;
}

/* Adjust main content to account for left sidebar */
body.webosTV main[class*='mainContent'] {
  margin-left: 100px !important;
}

body.webosTV header[class*='header'] {
  margin-left: 100px !important;
}

/* Hide the music logo in mobile header on TV (we don't need it) */
body.webosTV .mobileOnly[class*='MusicLogo'] {
  display: none !important;
}

/* ============================================
   Top Bar Modifications for TV
   ============================================ */

/* Hide logo completely on TV - not needed since we have sidebar navigation */
body.webosTV header a[title='Home'] {
  display: none !important;
}

/* Hide layout switcher button on TV */
body.webosTV button[id='view-layout-button'],
body.webosTV button[id*='viewLayout'] {
  display: none !important;
}

/* Search form modifications for TV */
body.webosTV form {
  position: relative;
}

/* Target the search input wrapper (added via JS) */
/* stylelint-disable-next-line selector-class-pattern */
body.webosTV .webos-search-wrapper {
  width: 0 !important;
  min-width: 0 !important;
  overflow: hidden !important;
  opacity: 0 !important;
  transition: all 0.3s ease !important;
}

/* Also hide the input itself */
body.webosTV input[id='search-input'] {
  width: 0 !important;
  min-width: 0 !important;
  padding: 0 !important;
  border: none !important;
  opacity: 0 !important;
  transition: all 0.3s ease !important;
}

/* When search is expanded (via JS class) - show wrapper */
/* stylelint-disable-next-line selector-class-pattern */
body.webosTV form.searchExpanded .webos-search-wrapper {
  width: 300px !important;
  min-width: 300px !important;
  margin-right: var(--space-8) !important;
  overflow: visible !important;
  opacity: 1 !important;
}

/* When search is expanded - show and style input */
body.webosTV form.searchExpanded input[id='search-input'] {
  width: 100% !important;
  min-width: 100% !important;
  padding: calc(var(--space-12) - 2px) var(--space-12) !important;
  border: 1px solid var(--border-color) !important;
  opacity: 1 !important;
}

/* Search button should always be visible */
body.webosTV form button[type='submit'] {
  position: relative !important;
  z-index: 2 !important;
}

/* ============================================
   Hide "See All" Links - Not useful on TV
   ============================================ */

/* Hide the mobile "See all" text links */
body.webosTV a.mobileOnly.link {
  display: none !important;
}

/* Hide the header section links (both desktop and mobile "See all") */
body.webosTV h3 a {
  pointer-events: none !important;
  cursor: default !important;
}

/* Hide the "more" icon specifically */
body.webosTV h3 a svg {
  display: none !important;
}

/* ============================================
   Simple Focus States for TV Remote
   Uses theme color - works with light/dark themes
   ============================================ */

body.webosTV :focus,
body.webosTV :focus-visible {
  outline: 3px solid var(--theme-color, #6313bc) !important;
  outline-offset: 2px !important;
}

/* Enhanced focus for album/artist/playlist image links */
body.webosTV .layoutImage a:focus,
body.webosTV .layoutImage a:focus-visible {
  display: block;
  outline: 4px solid var(--theme-color, #6313bc) !important;
  outline-offset: 3px !important;
  border-radius: var(--border-radius-large);
}

/* Ensure album image links are block-level for proper focus and dimensions */
body.webosTV .layoutImage a {
  display: block;
}

/* ============================================
   Disable hover effects on TV (no mouse)
   Hide elements that only appear on hover
   ============================================ */

/* Hide hover-only action buttons (like play/favourite on albums) */
body.webosTV [class*='actions'] {
  display: none !important;
}

/* ============================================
   Simplified Navigation for Albums/Artists/etc
   Only album images are focusable, not titles or artist links
   ============================================ */

/* Make title/artist links inside layout items not interactive */
body.webosTV .layoutContent a,
body.webosTV .layoutContent button {
  pointer-events: none;
}

/* Ensure these links can't receive focus */
body.webosTV .layoutContent a:focus,
body.webosTV .layoutContent button:focus {
  outline: none !important;
}

/* ============================================
   Enhanced Track Row Focus for Navigation
   Make focused track rows clearly visible
   ============================================ */

/* When a button inside a track row has focus, highlight the entire row */
body.webosTV .trackRow:focus-within {
  position: relative;
  z-index: 1;
  background-color: color-mix(
    in oklab,
    var(--theme-color, #6313bc) 20%,
    transparent
  ) !important;
}

/* Extra emphasis on the focused play button */
body.webosTV .trackRow button:focus,
body.webosTV .trackRow button:focus-visible {
  outline: 4px solid var(--theme-color-light) !important;
  outline-offset: 2px !important;
  background-color: color-mix(
    in oklab,
    var(--theme-color-light, #6313bc) 80%,
    var(--black-color)
  ) !important;
  border-radius: 50%;
  transform: scale(1.15);
}

/* ============================================
   Enhanced Page Navigation Focus
   Add background highlight to focused page nav buttons
   ============================================ */

/* SUPER VISIBLE TEST - Enhanced focus for page navigation buttons (Discover, Podcasts, Radio) */
body.webosTV .pageLink:focus,
body.webosTV .pageLink:focus-visible {
  font-weight: var(--font-weight-bold) !important;
  outline: 0 !important;

  /* Very obvious background for testing */
  background-color: color-mix(
    in oklab,
    var(--theme-color, #6313bc) 40%,
    transparent
  ) !important;
  transform: scale(1.1);
  transition: all 0.2s ease;
}
